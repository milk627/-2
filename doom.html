<!
<!DOCTYPE html>
<html>
<head>
    <title>Dino Snake 3D</title>
    <style>
        body { margin: 0; background: #1a1a1a; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; overflow: hidden; font-family: 'Courier New', monospace; }
        canvas { background: #222; box-shadow: 0 0 50px rgba(0,255,0,0.2); border-radius: 10px; }
        #stats { color: #0f0; font-size: 24px; margin-bottom: 10px; }
        .hint { color: #666; margin-top: 10px; }
    </style>
</head>
<body>
    <div id="stats">DINO SCORE: <span id="score">0</span></div>
    <canvas id="gameCanvas"></canvas>
    <div class="hint">Керування: WASD або Стрілки</div>

<script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");
    const scoreEl = document.getElementById("score");

    canvas.width = 600;
    canvas.height = 600;

    const tileSize = 25;
    const gridCount = 16;
    
    function toIso(x, y, z = 0) {
        return {
            isoX: (x - y) * tileSize + canvas.width / 2,
            isoY: (x + y) * (tileSize / 2) + 120 - z
        };
    }

    let snake = [{x: 8, y: 8}, {x: 7, y: 8}, {x: 6, y: 8}];
    let food = {x: 12, y: 12};
    let dx = 1, dy = 0;
    let nextDir = {x: 1, y: 0};
    let score = 0;
    let gameSpeed = 150;

    function drawCube(x, y, z, color, sideColor, topColor) {
        const {isoX, isoY} = toIso(x, y, z);
        const w = tileSize;
        const h = tileSize / 2;

        // Верх
        ctx.beginPath();
        ctx.moveTo(isoX, isoY);
        ctx.lineTo(isoX + w, isoY + h);
        ctx.lineTo(isoX, isoY + tileSize);
        ctx.lineTo(isoX - w, isoY + h);
        ctx.closePath();
        ctx.fillStyle = topColor;
        ctx.fill();

        // Ліва грань
        ctx.beginPath();
        ctx.moveTo(isoX - w, isoY + h);
        ctx.lineTo(isoX, isoY + tileSize);
        ctx.lineTo(isoX, isoY + tileSize + (w/2));
        ctx.lineTo(isoX - w, isoY + h + (w/2));
        ctx.closePath();
        ctx.fillStyle = sideColor;
        ctx.fill();

        // Права грань
        ctx.beginPath();
        ctx.moveTo(isoX + w, isoY + h);
        ctx.lineTo(isoX, isoY + tileSize);
        ctx.lineTo(isoX, isoY + tileSize + (w/2));
        ctx.lineTo(isoX + w, isoY + h + (w/2));
        ctx.closePath();
        ctx.fillStyle = color;
        ctx.fill();
    }

    function update() {
        dx = nextDir.x; dy = nextDir.y;
        const head = {x: snake[0].x + dx, y: snake[0].y + dy};

        if (head.x < 0 || head.x >= gridCount || head.y < 0 || head.y >= gridCount) return reset();
        for (let s of snake) if (s.x === head.x && s.y === head.y) return reset();

        snake.unshift(head);
        if (head.x === food.x && head.y === food.y) {
            score += 10;
            scoreEl.innerText = score;
            spawnFood();
            if (gameSpeed > 60) gameSpeed -= 2;
        } else {
            snake.pop();
        }
    }

    function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // Сітка
        ctx.strokeStyle = "#333";
        for (let i = 0; i < gridCount; i++) {
            for (let j = 0; j < gridCount; j++) {
                const {isoX, isoY} = toIso(i, j);
                ctx.strokeRect(isoX - tileSize, isoY, tileSize * 2, tileSize);
            }
        }

        // Яблуко
        drawCube(food.x, food.y, 0, "#d63031", "#8b0000", "#ff7675");

        // Дино-змійка
        snake.forEach((part, i) => {
            const isHead = i === 0;
            drawCube(
                part.x, part.y, isHead ? 5 : 0, 
                isHead ? "#218c74" : "#2ecc71", 
                isHead ? "#1b4f72" : "#27ae60", 
                isHead ? "#33d9b2" : "#a29bfe"
            );
        });
    }

    function spawnFood() {
        food.x = Math.floor(Math.random() * gridCount);
        food.y = Math.floor(Math.random() * gridCount);
    }

    function reset() {
        alert("Динозаврик врізався! Рахунок: " + score);
        snake = [{x: 8, y: 8}, {x: 7, y: 8}, {x: 6, y: 8}];
        nextDir = {x: 1, y: 0}; dx = 1; dy = 0;
        score = 0; scoreEl.innerText = score;
        gameSpeed = 150;
    }

    window.addEventListener("keydown", e => {
        const key = e.key.toLowerCase();
        if ((key === "w" || key === "arrowup") && dy === 0) nextDir = {x: 0, y: -1};
        if ((key === "s" || key === "arrowdown") && dy === 0) nextDir = {x: 0, y: 1};
        if ((key === "a" || key === "arrowleft") && dx === 0) nextDir = {x: -1, y: 0};
        if ((key === "d" || key === "arrowright") && dx === 0) nextDir = {x: 1, y: 0};
    });

    function gameLoop() {
        update();
        draw();
        setTimeout(gameLoop, gameSpeed);
    }

    spawnFood();
    gameLoop();
</script>
</body>
</html>